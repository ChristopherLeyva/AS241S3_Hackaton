<div class="form-container">
  <form [formGroup]="estudianteForm" (ngSubmit)="onSubmit()">

    <div>
      <label>DNI:</label>
      <input type="text" formControlName="dni" maxlength="8" pattern="^\d{8}$">
      <div *ngIf="f('dni').invalid && f('dni').touched">
        DNI debe tener exactamente 8 dígitos numéricos.
      </div>
    </div>

    <div>
      <label>Nombres:</label>
      <input type="text" formControlName="nombres" pattern="^[A-Za-zÁÉÍÓÚÑáéíóúñ\s]+$">
      <div *ngIf="f('nombres').invalid && f('nombres').touched">
        Solo letras y espacios permitidos.
      </div>
    </div>

    <div>
      <label>Apellidos:</label>
      <input type="text" formControlName="apellidos" pattern="^[A-Za-zÁÉÍÓÚÑáéíóúñ\s]+$">
      <div *ngIf="f('apellidos').invalid && f('apellidos').touched">
        Solo letras y espacios permitidos.
      </div>
    </div>

    <div>
      <label>Email:</label>
      <input type="email" formControlName="email">
      <div *ngIf="f('email').invalid && f('email').touched">
        Correo inválido (solo minúsculas, sin espacios).
      </div>
    </div>

    <div>
      <label>Celular:</label>
      <input type="text" formControlName="celular" maxlength="9" pattern="^9\d{8}$">
      <div *ngIf="f('celular').invalid && f('celular').touched">
        Debe comenzar con 9 y tener 9 dígitos.
      </div>
    </div>

    <div>
      <label>Programa:</label>
      <input type="text" formControlName="programa">
      <div *ngIf="f('programa').invalid && f('programa').touched">
        Campo requerido.
      </div>
    </div>

    <div>
      <label>Año de Ingreso:</label>
      <input type="number" formControlName="anioIngreso" min="2000" [max]="currentYear">
      <div *ngIf="f('anioIngreso').invalid && f('anioIngreso').touched">
        Debe estar entre 2000 y {{ currentYear }}.
      </div>
    </div>

    <div>
      <label>Departamento:</label>
      <select formControlName="departamento" (change)="onDepartamentoChange($event)">
        <option value="">-- Seleccione --</option>
        <option *ngFor="let d of departamentos" [value]="d">{{ d }}</option>
      </select>
    </div>

    <div>
      <label>Provincia:</label>
      <select formControlName="provincia" (change)="onProvinciaChange($event)">
        <option value="">-- Seleccione --</option>
        <option *ngFor="let p of provincias" [value]="p">{{ p }}</option>
      </select>
    </div>

    <div>
      <label>Distrito:</label>
      <select formControlName="distrito">
        <option value="">-- Seleccione --</option>
        <option *ngFor="let d of distritos" [value]="d">{{ d }}</option>
      </select>
    </div>

    <button type="submit">
      {{ isEditMode ? 'Actualizar' : 'Registrar' }}
    </button>
  </form>
</div>
